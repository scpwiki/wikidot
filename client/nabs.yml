# -- UTILITY

update: pnpm i && pnpm -r build
build: ultra -r build
force-build: ultra --rebuild -r build

# -- TESTING

test:compile:
  - trash tests-dist
  - node scripts/build-tests.js
test:run: uvu ./tests-dist/dist test-megabundle.+js$
test: pnpm test:compile && nyc --use-spawn-wrap pnpm test:run

# -- VALIDATION

typecheck: tsc

lint:
  eslint: eslint "./**/*.js" "./**/*.ts"
  stylelint: stylelint "modules/**/*.scss" "web/**/*.scss"
  prettier: prettier --ignore-unknown --check "modules/**" "web/**"

lint:fix:
  eslint: eslint "./**/*.js" "./**/*.ts" --fix
  stylelint: stylelint "modules/**/*.scss" "web/**/*.scss" --fix
  prettier: prettier --write --ignore-unknown "modules/**" "web/**"

# Runs everything in parallel for maximum speed
validate:cmd: pnpm lint && pnpm typecheck
validate: ultra --concurrency 10 validate:cmd

# -- MISC.

dev:dev-sandbox: ultra --raw -r --filter "web/dev-sandbox" dev
